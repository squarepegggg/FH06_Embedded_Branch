#
# Copyright (c) 2024 Nordic Semiconductor
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

CONFIG_RESET_ON_FATAL_ERROR=n

# STEP 1.1 - Enable Kconfigs for SPI and GPIO
CONFIG_GPIO=y
CONFIG_SPI=y
CONFIG_STATIC_INIT_GNU=y
CONFIG_SERIAL=n
CONFIG_LOG=y
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_LOG_BACKEND_RTT=y
CONFIG_USE_SEGGER_RTT=y
CONFIG_SEGGER_RTT_BUFFER_SIZE_UP=4096
CONFIG_BT=y
CONFIG_FPU=y
CONFIG_CBPRINTF_FP_A_SUPPORT=y
CONFIG_MAIN_STACK_SIZE=2048
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DEVICE_NAME="AccelDevice"
CONFIG_BT_EXT_ADV=y
CONFIG_ASSERT=y
CONFIG_BT_MAX_CONN=1
CONFIG_BT_GATT_CLIENT=n

# Disable MPU stack guard â€” nRF52832 only has 8 MPU regions and BLE + threads exhaust them
CONFIG_HW_STACK_PROTECTION=n

# Allow peripheral to request faster BLE connection intervals for real-time data
CONFIG_BT_GAP_AUTO_UPDATE_CONN_PARAMS=y
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12
CONFIG_BT_PERIPHERAL_PREF_LATENCY=0
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# SPI power management disabled to avoid MPU region allocation crashes
# CONFIG_PM_DEVICE=y
# CONFIG_PM_DEVICE_RUNTIME=y




